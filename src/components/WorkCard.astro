---
interface Props {
  title: string;
  category: string;
  year: number;
  thumbnail: string;
  previewVideo?: string;
  slug: string;
  role: string;
}

const { title, category, year, thumbnail, previewVideo, slug, role } = Astro.props;

const categoryLabels: Record<string, string> = {
  commercial: "Commercial",
  "music-video": "Music Video",
  documentary: "Documentary",
  wedding: "Wedding",
  brand: "Brand Film",
  "short-film": "Short Film",
};
---

<article class="work-card group relative" data-animate>
  <a href={`/works/${slug}`} class="block relative overflow-hidden rounded-sm aspect-[16/10]">
    <!-- Thumbnail -->
    <img
      src={thumbnail}
      alt={title}
      class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
      loading="lazy"
      decoding="async"
      width="640"
      height="400"
    />

    <!-- Preview Video (hidden until hover) -->
    {previewVideo && (
      <video
        class="work-preview-video absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-500"
        src={previewVideo}
        muted
        loop
        playsinline
        preload="none"
        aria-hidden="true"
      />
    )}

    <!-- Hover overlay -->
    <div class="absolute inset-0 bg-gradient-to-t from-bg-primary/80 via-bg-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500">
    </div>

    <!-- Category Badge -->
    <div class="absolute top-4 left-4 z-10">
      <span class="text-[10px] font-semibold uppercase tracking-widest px-3 py-1 bg-bg-primary/60 backdrop-blur-sm text-text-secondary rounded-sm">
        {categoryLabels[category] || category}
      </span>
    </div>

    <!-- Bottom info (visible on hover) -->
    <div class="absolute bottom-0 left-0 right-0 p-5 z-10 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500">
      <h3 class="text-lg font-semibold text-text-primary leading-tight">
        {title}
      </h3>
      <p class="mt-1 text-sm text-text-secondary">
        {role} Â· {year}
      </p>
    </div>

    <!-- Play icon on hover -->
    <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 pointer-events-none">
      <div class="w-14 h-14 rounded-full bg-accent/20 backdrop-blur-sm flex items-center justify-center border border-accent/30">
        <svg class="w-5 h-5 text-accent ml-0.5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z" />
        </svg>
      </div>
    </div>
  </a>
</article>
